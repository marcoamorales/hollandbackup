#
# /etc/holland/providers/mysqldump.conf
#
# http://docs.hollandbackup.org/provider_configs/mysqldump.html
#
# Generated by Chef for <%= node[:fqdn] %>
#

<% unless
    @resource.mysql_binpath.nil? &&
    @resource.lock_method.nil? &&
    @resource.exclude_invalid_views.nil? &&
    @resource.dump_routines.nil? &&
    @resource.dump_events.nil? &&
    @resource.stop_slave.nil? &&
    @resource.bin_log_position.nil? &&
    @resource.flush_logs.nil? &&
    @resource.file_per_database.nil? &&
    @resource.additional_options.nil? &&
    @resource.extra_defaults.nil? &&
    @resource.estimate_method.nil?
%>
[mysqldump]
<% unless @resource.mysql_binpath.nil? %>
mysql-binpath = <%= @resource.mysql_binpath %>
<% end %>
<% unless @resource.lock_method.nil? %>
lock-method = <%= @resource.lock_method %>
<% end %>
<% unless @resource.exclude_invalid_views.nil? %>
exclude-invalid-views = <%= @resource.exclude_invalid_views %>
<% end %>
<% unless @resource.dump_routines.nil? %>
dump-routines = <%= @resource.dump_routines %>
<% end %>
<% unless @resource.dump_events.nil? %>
dump-events = <%= @resource.dump_events %>
<% end %>
<% unless @resource.stop_slave.nil? %>
stop-slave = <%= @resource.stop_slave %>
<% end %>
<% unless @resource.bin_log_position.nil? %>
bin-log-position = <%= @resource.bin_log_position %>
<% end %>
<% unless @resource.flush_logs.nil? %>
flush-logs = <%= @resource.flush_logs %>
<% end %>
<% unless @resource.file_per_database.nil? %>
file-per-database = <%= @resource.file_per_database %>
<% end %>
<% unless @resource.additional_options.nil? %>
additional-options = <%= @resource.additional_options %>
<% end %>
<% unless @resource.extra_defaults.nil? %>
extra-defaults = <%= @resource.extra_defaults %>
<% end %>
<% unless @resource.estimate_method.nil? %>
estimate-method = <%= @resource.estimate_method %>
<% end %>
<% end %>
<% unless
    @resource.databases.nil? &&
    @resource.exclude_databases.nil? &&
    @resource.tables.nil? &&
    @resource.exclude_tables.nil?
%>
# database and table filtering
<% unless @resource.databases.nil? %>
databases = <%= @resource.databases %>
<% end %>
<% unless @resource.exclude_databases.nil? %>
exclude-databases = <%= @resource.exclude_databases %>
<% end %>
<% unless @resource.tables.nil? %>
tables = <%= @resource.tables %>
<% end %>
<% unless @resource.exclude_tables.nil? %>
exclude-tables = <%= @resource.exclude_tables %>
<% end %>
<% end %>
<% unless
    @resource.method.nil? &&
    @resource.inline.nil? &&
    @resource.level.nil? &&
    @resource.bin_path.nil?
%>
[compression]
<% unless @resource.method.nil? %>
method = <%= @resource.method %>
<% end %>
<% unless @resource.inline.nil? %>
inline = <%= @resource.inline %>
<% end %>
<% unless @resource.level.nil? %>
level = <%= @resource.level %>
<% end %>
<% unless @resource.bin_path.nil? %>
bin-path = <%= @resource.bin_path %>
<% end %>
<% end %>

<% unless
    @resource.defaults_extra_file.nil? &&
    @resource.user.nil? &&
    @resource.password.nil? &&
    @resource.socket.nil? &&
    @resource.host.nil? &&
    @resource.port.nil?
%>
[mysql:client]
<% unless @resource.defaults_extra_file.nil? %>
defaults-extra-file = <%= @resource.defaults_extra_file %>
<% end %>
<% unless @resource.user.nil? %>
user = <%= @resource.user %>
<% end %>
<% unless @resource.password.nil? %>
password = <%= @resource.password %>
<% end %>
<% unless @resource.socket.nil? %>
socket = <%= @resource.socket %>
<% end %>
<% unless @resource.host.nil? %>
host = <%= @resource.host %>
<% end %>
<% unless @resource.port.nil? %>
port = <%= @resource.port %>
<% end %>
<% end %>
